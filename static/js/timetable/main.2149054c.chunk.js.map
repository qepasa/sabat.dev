{"version":3,"sources":["components/PageFooterComponent.tsx","components/PageHeaderComponent.tsx","store/classes/actions.ts","store/schedule/actions.ts","utils/math-utils.ts","components/timetable/hourTimetable/HourDialogComponent.tsx","components/timetable/hourTimetable/LessonComponent.tsx","components/timetable/dayTimetable/DayTimetableComponent.tsx","components/timetable/timetableHeader/HeaderSlotComponent.tsx","components/timetable/timetableHeader/TimetableHeaderComponent.tsx","components/timetable/TimetableComponent.tsx","App.tsx","reportWebVitals.ts","store/schedule/reducer.ts","store/classes/reducer.ts","store/root-reducer.ts","store/schedule/epics.ts","store/classes/epics.ts","store/root-epic.ts","services/schedule-api.ts","services/index.ts","store/index.ts","index.tsx"],"names":["useStyles","makeStyles","theme","footer","backgroundColor","palette","background","paper","marginRight","spacing","flexShrink","PageFooterComponent","classes","className","Typography","variant","align","gutterBottom","style","float","target","href","toolbar","borderBottom","divider","toolbarTitle","margin","flex","breakpoints","down","fontSize","sectionDesktop","display","up","sectionMobile","withRouter","connect","state","availableClasses","history","useMediaQuery","React","useState","anchorEl","setAnchorEl","open","Boolean","handleClick","event","currentTarget","handleClose","menuItemClicked","cla","push","classParam","useParams","Toolbar","Box","alignSelf","Button","color","onClick","endIcon","IconButton","Menu","id","keepMounted","onClose","PaperProps","maxHeight","map","MenuItem","selected","component","noWrap","Tooltip","title","aria-label","arrow","loadClassesAsync","createAsyncAction","loadScheduleAsync","gcd","x","y","lcm","an","length","Error","last","pop","lcm_rec","HourDialogComponent","lessons","lessonNumber","CssBaseline","Dialog","aria-labelledby","fullWidth","DialogTitle","DialogContent","List","lesson","ListItem","ListItemText","primary","subject","group","secondary","teacher","classroom","Divider","DialogActions","lessonTile","padding","textStyle","LessonComponent","hexcolor","height","lessonsByHour","useFitText","ref","setOpen","dialogData","setDialogData","setLessonNumber","textColor","slice","split","hex","join","parseInt","substr","overflow","flexDirection","e","currentTargetRect","getBoundingClientRect","clickPositionFrac","pageX","left","right","lessonDurationFrac","duration","xD","Math","floor","current","Node","contains","time_index","textAlign","getProcessedHourSlots","dayTimetable","maxCongetsion","Array","fill","i","totalWidth","filter","val","processedHourSlot","hourSchedule","processedLessons","sort","a","b","aLen","bLen","localeCompare","ceil","remainingWidth","hourSlot","lessonStart","lessonEnd","width","max","min","DayTimetableComponent","dayIdx","currentWeekInterval","flat","getLessonsByHour","processedHourSlots","gridRows","bottom","top","fromBottom","ToComps","result","cellFreeSpace","gridRowStart","gridRowEnd","gridRow","toString","gridColumn","textOverflow","whiteSpace","format","locale","pl","gridTemplateColumns","columnGap","gridTemplateRows","HeaderSlotComponent","lessonIdx","startOfLesson","addMinutes","TimetableHeaderComponent","hm","Date","setHours","idx","dispatchProps","loadSchedule","request","loadClasses","timetableWrapper","gridAutoFlow","rowGap","schedule","console","log","useEffect","today","days","eachDayOfInterval","start","startOfWeek","weekStartsOn","end","endOfWeek","from","keys","App","basename","path","Topics","Home","to","About","match","useRouteMatch","url","Topic","topicId","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","isLoadingSchedule","createReducer","loading","error","handleAction","failure","success","action","payload","resp","scheduleReducer","combineReducers","isLoadingClasses","classesReducer","rootReducer","loadScheduleEpic","action$","state$","api","pipe","isActionOf","switchMap","getSchedule","catchError","message","of","loadClassesEpic","getClasses","combineEpics","Object","values","scheduleEpics","classesEpics","fetch","response","json","epicMiddleware","createEpicMiddleware","dependencies","services","middlewares","enhancer","composeWithDevTools","applyMiddleware","store","createStore","run","rootEpic","createMuiTheme","overrides","MuiCssBaseline","body","scrollbarWidth","scrollbarColor","bordeRadius","border","ReactDOM","render","StrictMode","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.2149054c.chunk.js","sourcesContent":["import { Container, makeStyles, Typography } from \"@material-ui/core\";\r\nimport React, { FunctionComponent } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    footer: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        marginRight: theme.spacing(2),\r\n        flexShrink: 0,\r\n    },\r\n}));\r\n\r\nconst PageFooterComponent: FunctionComponent = () => {\r\n    const classes = useStyles();\r\n    return <footer className={classes.footer}>\r\n        {/* <Container maxWidth=\"lg\"> */}\r\n        <Typography variant=\"caption\" align=\"center\" gutterBottom>\r\n            <div style={{ float: \"right\" }}>\r\n\r\n                <a target=\"_blank\" href=\"https://github.com/Cloud11665/sabat.dev/tree/master/api\">API rozkładu zajęć</a> stworzone przez <a target=\"_blank\" href=\"https://github.com/Cloud11665\">Cloud11665</a>, Oprawa graficzna <a target=\"_blank\" href=\"https://github.com/qepasa\">qepasa</a>\r\n            </div>\r\n        </Typography>\r\n        {/* </Container> */}\r\n    </footer>;\r\n};\r\n\r\nexport default PageFooterComponent;","import { Badge, Box, Button, IconButton, makeStyles, Menu, MenuItem, Toolbar, Tooltip, Typography, useMediaQuery } from \"@material-ui/core\";\r\nimport React, { FunctionComponent } from \"react\";\r\nimport { RouteComponentProps, useParams, withRouter } from \"react-router-dom\";\r\nimport SchoolIcon from '@material-ui/icons/School';\r\nimport { RootState } from \"typesafe-actions\";\r\nimport { connect } from \"react-redux\";\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    toolbar: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    toolbarTitle: {\r\n        margin: theme.spacing(1),\r\n        flex: 1,\r\n        [theme.breakpoints.down('md')]: {\r\n            fontSize: '125%',\r\n        }\r\n    },\r\n    sectionDesktop: {\r\n        display: 'none',\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'flex',\r\n        },\r\n    },\r\n    sectionMobile: {\r\n        display: 'flex',\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'none',\r\n        },\r\n    },\r\n}));\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n    availableClasses: state.classes.classes,\r\n});\r\n\r\ntype PageHeaderProps = ReturnType<typeof mapStateToProps> & RouteComponentProps;\r\n\r\ntype HeaderParams = {\r\n    classParam: string,\r\n};\r\n\r\nconst PageHeaderComponent: FunctionComponent<PageHeaderProps> = ({ availableClasses, history }) => {\r\n    const matches = useMediaQuery('(min-width:900px)');\r\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n    const open = Boolean(anchorEl);\r\n    // console.log(availableClasses);\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const menuItemClicked = (cla: string) => (() => {\r\n        handleClose();\r\n        history.push(`${cla}`);\r\n    });\r\n\r\n    const classes = useStyles();\r\n    const classParam = useParams<HeaderParams>().classParam;\r\n    return <Toolbar className={classes.toolbar}>\r\n        <Box alignSelf=\"left\">\r\n            <Button\r\n                className={classes.sectionDesktop}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n                endIcon={<SchoolIcon />}>\r\n                Wybierz klasę\r\n            </Button>\r\n            <IconButton onClick={handleClick} color=\"primary\" className={classes.sectionMobile}>\r\n                <SchoolIcon />\r\n            </IconButton>\r\n            <Menu\r\n                id=\"classes-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={open}\r\n                onClose={handleClose}\r\n                PaperProps={{\r\n                    style: {\r\n                        maxHeight: '50vh',\r\n                    }\r\n                }}>\r\n                {availableClasses.map(cla => <MenuItem key={cla} onClick={menuItemClicked(cla)} selected={cla === classParam}>{cla}</MenuItem>)}\r\n            </Menu>\r\n        </Box>\r\n        <Typography\r\n            component=\"h2\"\r\n            variant=\"h5\"\r\n            color=\"inherit\"\r\n            align=\"center\"\r\n            noWrap\r\n            className={classes.toolbarTitle}\r\n        >\r\n            Rozkład klasy {classParam}\r\n        </Typography>\r\n        <div className={classes.sectionDesktop}>\r\n            <Tooltip title={\"Wyślij do nas maila!\"} aria-label={\"send-feedback-tooltip\"} arrow>\r\n                <IconButton aria-label=\"send-feedback\" color=\"inherit\" component=\"a\" href=\"mailto:abababa@babababa.com?cc=babababa@babababa.com&subject=Zg%C5%82o%C5%9B%20B%C5%82%C4%85d\" target=\"_blank\">\r\n                    <MailIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n\r\n            <Tooltip title={\"Kod. PogU\"} aria-label={\"github-repo-tooltip\"} arrow>\r\n                <IconButton aria-label=\"github-repo\" color=\"inherit\" component=\"a\" href=\"https://github.com/qepasa/VLO-Schedule\" target=\"_blank\">\r\n                    <GitHubIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n        </div>\r\n    </Toolbar >\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(PageHeaderComponent));","import { GetClassesResponse } from \"ApiModel\";\r\nimport { createAsyncAction } from \"typesafe-actions\";\r\n\r\nexport const loadClassesAsync = createAsyncAction(\r\n    'LOAD_CLASSES_REQUEST',\r\n    'LOAD_CLASSES_SUCCESS',\r\n    'LOAD_CLASSES_FAILURE'\r\n)<undefined, GetClassesResponse, string>();","import { GetScheduleResponse } from \"ApiModel\";\r\nimport { createAsyncAction } from \"typesafe-actions\";\r\n\r\nexport const loadScheduleAsync = createAsyncAction(\r\n    'LOAD_SCHEDULE_REQUEST',\r\n    'LOAD_SCHEDULE_SUCCESS',\r\n    'LOAD_SCHEDULE_FAILURE'\r\n)<string, GetScheduleResponse, string>();","\r\n// NOTE(pawelp): using 'number' here is okay since we're not expecting \r\n// arguments larger than sqrt(2^53-1) (Number.MAX_SAFE_INTEGER). In reality we're expecting ~thousands here at any time?\r\n\r\n\r\nfunction gcd(x: number, y: number): number {\r\n    if (y > x) {\r\n        return gcd(y, x);\r\n    }\r\n    if (y == 0) {\r\n        return x;\r\n    }\r\n    return gcd(y, x % y);\r\n}\r\n\r\nexport function lcm(an: number[]): number {\r\n    if (an.length == 0) { throw Error('You need to pass at least one number!'); }\r\n    if (an.length == 1) return an[0];\r\n    if (an.length == 2) return (an[0] * an[1]) / gcd(an[0], an[1]);\r\n\r\n    const last = an.pop();\r\n    const lcm_rec = lcm(an);\r\n    return (last! * lcm_rec) / gcd(last!, lcm_rec);\r\n}\r\n\r\n\r\n\r\n/*!\r\n * Get the contrasting color for any hex color\r\n * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com\r\n * Derived from work by Brian Suda, https://24ways.org/2010/calculating-color-contrast/\r\n * @param  {String} A hexcolor value\r\n * @return {String} The contrasting color (black or white)\r\n */\r\nexport function getContrast (hexcolor: string){\r\n\r\n\t// If a leading # is provided, remove it\r\n\tif (hexcolor.slice(0, 1) === '#') {\r\n\t\thexcolor = hexcolor.slice(1);\r\n\t}\r\n\r\n\t// If a three-character hexcode, make six-character\r\n\tif (hexcolor.length === 3) {\r\n\t\thexcolor = hexcolor.split('').map(function (hex) {\r\n\t\t\treturn hex + hex;\r\n\t\t}).join('');\r\n\t}\r\n\r\n\t// Convert to RGB value\r\n\tvar r = parseInt(hexcolor.substr(0,2),16);\r\n\tvar g = parseInt(hexcolor.substr(2,2),16);\r\n\tvar b = parseInt(hexcolor.substr(4,2),16);\r\n\r\n\t// Get YIQ ratio\r\n\tvar yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\r\n\r\n\t// Check contrast\r\n\treturn (yiq >= 70) ? 'black' : 'white';\r\n};","import React, { FunctionComponent } from \"react\";\r\nimport { Lesson } from 'ApiModel';\r\nimport { Button, CssBaseline, Dialog, DialogActions, DialogContent, DialogTitle, Divider, List, ListItem, ListItemText } from \"@material-ui/core\";\r\nimport { prependOnceListener } from \"process\";\r\n\r\ntype HourDialogComponentOwnProps = {\r\n    lessons: Lesson[];\r\n    lessonNumber: number;\r\n    onClose: (() => void);\r\n    open: boolean;\r\n};\r\n\r\ntype LessonComponentProps = HourDialogComponentOwnProps;\r\n\r\n\r\nconst HourDialogComponent: FunctionComponent<LessonComponentProps> = ({ lessons, lessonNumber, onClose, open }) => {\r\n\r\n    const handleClose = () => {\r\n        onClose();\r\n    };\r\n    \r\n    return <>\r\n        <CssBaseline/>\r\n        <Dialog onClose={handleClose} aria-labelledby=\"lessons-list-dialog\" open={open} fullWidth>\r\n            <DialogTitle id=\"lessons-list-dialog-title\">Lekcja {lessonNumber}</DialogTitle>\r\n            <DialogContent>\r\n                <List>\r\n                    {lessons.map(lesson => (<>\r\n                        <ListItem key={lesson.subject + lesson.teacher + lesson.color}>\r\n                            <ListItemText\r\n                                primary={`${lesson.subject}${lesson.group ? \" - \" + lesson.group : \"\"}`}\r\n                                secondary={<>\r\n                                    <div>Nauczyciel: {lesson.teacher}</div>\r\n                                    <div>Sala: {lesson.classroom}</div>\r\n                                </>}\r\n                            />\r\n                        </ListItem>\r\n                        <Divider variant=\"inset\" component=\"li\" />\r\n                    </>\r\n                    ))}\r\n                </List>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleClose} color=\"primary\">Zamknij</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </>\r\n};\r\n\r\nexport default HourDialogComponent;","import { makeStyles, Typography } from '@material-ui/core';\r\nimport { Lesson } from 'ApiModel';\r\nimport React, { FunctionComponent, useState } from 'react';\r\nimport useFitText from 'use-fit-text';\r\nimport HourDialogComponent from './HourDialogComponent';\r\nimport { getContrast } from '../../../utils/math-utils';\r\n\r\ntype LessonComponentOwnProps = {\r\n    lesson: Lesson;\r\n    height: string;\r\n    lessonsByHour: Lesson[][];\r\n};\r\n\r\ntype LessonComponentProps = LessonComponentOwnProps;\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    lessonTile: {\r\n        padding: theme.spacing(0.2),\r\n    },\r\n    textStyle: {\r\n        // NOTE(pawelp): fiddle with this if you want to make text colors fancy\r\n        // filter: 'invert(5%) contrast(200%) grayscale(170%) saturate(0%)'\r\n    }\r\n}));\r\n\r\nconst LessonComponent: FunctionComponent<LessonComponentProps> = ({ lesson, height, lessonsByHour }) => {\r\n    const { fontSize, ref } = useFitText();\r\n    const [open, setOpen] = useState(false);\r\n    const [dialogData, setDialogData] = useState<Lesson[]>([]);\r\n    const [lessonNumber, setLessonNumber] = useState<number>(0);\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    }\r\n\r\n    const handleClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n        let currentTargetRect = e.currentTarget.getBoundingClientRect();\r\n        // console.log(e);\r\n        // console.log(currentTargetRect);\r\n        // console.log(e.pageX);\r\n        const clickXPosRelative = e.pageX - currentTargetRect.left;\r\n        const clickPositionFrac = clickXPosRelative / (currentTargetRect.right - currentTargetRect.left);\r\n        // console.log(clickPositionFrac);\r\n        const lessonDurationFrac = 1 / lesson.duration;\r\n        const xD = Math.floor(clickPositionFrac / lessonDurationFrac);\r\n        // console.log(xD)\r\n\r\n        if (e.target === ref.current ||\r\n            (e.target instanceof Node && ref.current.contains(e.target))) {\r\n            setDialogData(lessonsByHour[lesson.time_index + xD]);\r\n            setLessonNumber(lesson.time_index + xD);\r\n            setOpen(true);\r\n        }\r\n    }\r\n    const classes = useStyles();\r\n    const textColor = getContrast(lesson.color);\r\n\r\n    return <div style={{\r\n        fontSize, height: height, overflow: 'hidden', display: 'flex', flexDirection: 'column'\r\n    }} ref={ref} onClick={handleClick} className={classes.lessonTile}>\r\n        <div style={{\r\n            textAlign: 'left', flex: \"1 0 auto\", color: textColor,\r\n        }} className={classes.textStyle}>{lesson.teacher}</div>\r\n        <div style={{ textAlign: 'center', flex: \"1 0 auto\", color: textColor }} className={classes.textStyle}>{lesson.subject}</div>\r\n        <div style={{ flexShrink: 0, color: textColor }} className={classes.textStyle}>\r\n            <div style={{ float: 'left', textAlign: 'left' }}>{lesson.classroom}</div>\r\n            <div style={{ float: 'right', textAlign: 'right' }}>{lesson.group}</div>\r\n        </div>\r\n        <HourDialogComponent lessons={dialogData} lessonNumber={lessonNumber} onClose={handleClose} open={open} />\r\n    </div>;\r\n};\r\n\r\nexport default LessonComponent;","import React, { FunctionComponent } from \"react\";\r\nimport { DaySchedule, Lesson } from 'ApiModel';\r\nimport { format } from \"date-fns\";\r\nimport { lcm } from \"../../../utils/math-utils\";\r\nimport LessonComponent from \"../hourTimetable/LessonComponent\";\r\nimport { pl } from \"date-fns/locale\";\r\nimport useFitText from \"use-fit-text\";\r\nimport { NumberLiteralType } from \"typescript\";\r\n\r\nfunction getLessonsByHour(dayTimetable: DaySchedule) {\r\n    const lessonsByHour = [...Array(11)].map(() => Array<Lesson>());\r\n\r\n    // console.log(lessonsByHour);\r\n    dayTimetable.flat().map(lesson => {\r\n        for (let i = 0; i < lesson.duration; i++) {\r\n            // console.log(lesson);\r\n            lessonsByHour[lesson.time_index + i].push(lesson);\r\n        }\r\n    });\r\n    return lessonsByHour;\r\n}\r\n\r\ntype DayTimetableOwnProps = {\r\n    dayTimetable: DaySchedule;\r\n    dayIdx: number;\r\n    currentWeekInterval: Date[];\r\n};\r\n\r\ntype DayTimetableProps = DayTimetableOwnProps;\r\n\r\ntype PositionData = {\r\n    width: number,\r\n};\r\n\r\ntype ProcessedLesson = Lesson & PositionData;\r\n\r\ntype ProcessedHourSlot = {\r\n    lessons: Array<ProcessedLesson>; // lessons that start at current slot. Sorted by (time_index+duration, subject) descending.\r\n    totalWidth: number;\r\n    ceil: number;\r\n    floor: number;\r\n}\r\n\r\ntype CellPositionData = {\r\n    top: number;\r\n    bottom: number;\r\n}\r\n\r\nfunction getProcessedHourSlots(dayTimetable: DaySchedule, lessonsByHour: Lesson[][]): Array<ProcessedHourSlot> {\r\n    const maxCongetsion = Array(11).fill(0);\r\n    // console.log(lessonsByHour);\r\n    for (let i = 0; i < 11; ++i) {\r\n        maxCongetsion[i] = lessonsByHour[i].length;\r\n    }\r\n\r\n    // console.log(maxCongetsion);\r\n\r\n    const totalWidth = lcm(maxCongetsion.filter(val => val != 0));\r\n\r\n    const processedHourSlot = dayTimetable.map(hourSchedule => {\r\n        const processedLessons = hourSchedule.map(lesson => { return lesson as ProcessedLesson });\r\n\r\n        processedLessons.sort((a, b) => {\r\n            const aLen = a.time_index + a.duration - 1;\r\n            const bLen = b.time_index + b.duration - 1;\r\n            if (aLen == bLen) {\r\n                return a.subject.localeCompare(b.subject);\r\n            }\r\n            return aLen > bLen ? -1 : 1;\r\n        });\r\n        return {\r\n            lessons: processedLessons,\r\n            totalWidth: totalWidth,\r\n            ceil: totalWidth,\r\n            floor: 0,\r\n        } as ProcessedHourSlot;\r\n    });\r\n    const remainingWidth = Array(11).fill(totalWidth);\r\n    /// calculate remaining width for each slot individually!!!!\r\n    for (const hourSlot of processedHourSlot) {\r\n        for (const lesson of hourSlot.lessons) {\r\n            const lessonStart = lesson.time_index, lessonEnd = lesson.time_index + lesson.duration;\r\n            const lessonMaxCongestion = Math.max(...maxCongetsion.slice(lessonStart, lessonEnd));\r\n            let width = totalWidth + 1;\r\n            for (let i = lessonStart; i < lessonEnd; ++i) {\r\n                width = Math.min(width, Math.floor(remainingWidth[i] / maxCongetsion[i]));\r\n            }\r\n            // const width = Math.floor(Math.max(...remainingWidth.slice(lessonStart, lessonEnd)) / lessonMaxCongestion);\r\n            // console.log(`maxCong: ${lessonMaxCongestion}, remainingW: ${hourSlot.reamainingWidth}`);\r\n            lesson.width = width;\r\n            for (let i = lessonStart; i < lessonEnd; ++i) {\r\n                maxCongetsion[i]--;\r\n                remainingWidth[i] -= width;\r\n            }\r\n        }\r\n    }\r\n\r\n    return processedHourSlot;\r\n}\r\n\r\nconst DayTimetableComponent: FunctionComponent<DayTimetableProps> = ({ dayTimetable, dayIdx, currentWeekInterval }) => {\r\n    const { fontSize, ref } = useFitText();\r\n    if (!dayTimetable) {\r\n        return <div></div>;\r\n    }\r\n    // console.log(dayTimetable.flat());\r\n    const lessonsByHour = getLessonsByHour(dayTimetable);\r\n    // console.log(lessonsByHour);\r\n    const processedHourSlots = getProcessedHourSlots(dayTimetable, lessonsByHour);\r\n\r\n    const gridRows = processedHourSlots.length > 0 ? processedHourSlots[0].totalWidth : 1;\r\n\r\n    const remainingWidth = Array<CellPositionData>(11);\r\n    for (let i = 0; i < 11; ++i) {\r\n        remainingWidth[i] = {\r\n            bottom: 1,\r\n            top: gridRows + 1,\r\n        };\r\n    }\r\n    let fromBottom: boolean = true;\r\n    // console.log(remainingWidth);\r\n    const ToComps = processedHourSlots.map(hourSlot => {\r\n        const result = [];\r\n        for (const lesson of hourSlot.lessons) {\r\n            // console.log(`Processing: $`)\r\n            let cellFreeSpace = remainingWidth[lesson.time_index];\r\n            let gridRowStart, gridRowEnd;\r\n            if (fromBottom) {\r\n                gridRowStart = cellFreeSpace.bottom;\r\n                gridRowEnd = cellFreeSpace.bottom + lesson.width;\r\n            } else {\r\n                gridRowEnd = cellFreeSpace.top;\r\n                gridRowStart = cellFreeSpace.top - lesson.width;\r\n            }\r\n            // console.log(`fromBottom: ${fromBottom} lesson:`);\r\n            // console.log(lesson);\r\n            // console.log(`gridRowStart: ${gridRowStart}, gridRowEnd: ${gridRowEnd}`);\r\n\r\n            result.push(<div style={\r\n                {\r\n                    backgroundColor: `${lesson.color}`,\r\n                    gridRow: `${gridRowStart.toString()} / ${gridRowEnd.toString()}`,\r\n                    gridColumn: `${(lesson.time_index + 1).toString()} / ${(lesson.time_index + lesson.duration + 1).toString()}`,\r\n\r\n                }}>\r\n                <LessonComponent lesson={lesson} height={(15 * lesson.width / gridRows) + 'vh'} lessonsByHour={lessonsByHour} />\r\n            </div>);\r\n            for (let i = lesson.time_index; i < lesson.time_index + lesson.duration; i++) {\r\n                if (fromBottom) {\r\n                    remainingWidth[i].bottom = gridRowEnd;\r\n                } else {\r\n                    remainingWidth[i].top = gridRowStart;\r\n                }\r\n            }\r\n            // console.log(remainingWidth);\r\n            fromBottom = !fromBottom;\r\n        }\r\n        return result;\r\n    })\r\n    // TODO(pawelp): handle empty processedhourslots\r\n    return <>\r\n        <div style={{ textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap' }}>\r\n            {format(currentWeekInterval[dayIdx], \"iii\", { locale: pl })}\r\n        </div>\r\n        <div style={{ display: 'grid', gridTemplateColumns: `repeat(11, calc(90vw/11))`, columnGap: '1px', gridTemplateRows: `repeat(${gridRows}, calc(15vh/${gridRows}))` }}>\r\n            {ToComps.flat()}\r\n        </div>\r\n        {/* {lessonsByHour.map((hour, idx) => <HourTimetableComponent slotIdx={idx} hourTimetable={hour} />)} */}\r\n    </>;\r\n};\r\n\r\nexport default DayTimetableComponent;\r\n","import { Box } from \"@material-ui/core\";\r\nimport { addMinutes, format } from \"date-fns\";\r\nimport React, { FunctionComponent } from \"react\";\r\nimport useFitText from \"use-fit-text\";\r\n\r\ntype HeaderSlotComponentProps = {\r\n    lessonIdx: number;\r\n    startOfLesson: number;\r\n}\r\n\r\nconst HeaderSlotComponent: FunctionComponent<HeaderSlotComponentProps> = ({ lessonIdx, startOfLesson }) => {\r\n    const { fontSize, ref } = useFitText();\r\n    return <Box height=\"5vh\" overflow=\"hidden\" whiteSpace=\"nowrap\" textOverflow=\"elipsis\">\r\n        <div style={{ fontSize }} ref={ref}>\r\n            <div>{lessonIdx.toString()}</div>\r\n            <div>{format(startOfLesson, \"HH:mm\") + \"-\" + format(addMinutes(startOfLesson, 45), \"HH:mm\")}</div>\r\n        </div>\r\n    </Box>\r\n}\r\n\r\n\r\nexport default HeaderSlotComponent;","import { Box } from \"@material-ui/core\";\r\nimport { addMinutes, format } from \"date-fns\";\r\nimport React, { FunctionComponent } from \"react\";\r\nimport { start } from \"repl\";\r\nimport useFitText from \"use-fit-text\";\r\nimport HeaderSlotComponent from \"./HeaderSlotComponent\";\r\n\r\n\r\ntype TimetableHeaderOwnProps = {\r\n};\r\n\r\nconst TimetableHeaderComponent: FunctionComponent<TimetableHeaderOwnProps> = () => {\r\n    const {fontSize, ref} = useFitText();\r\n    // todo(pawelp): this is ugly. Probably should extract this data somewhere else (e.g. to redux).\r\n    const startOfLessonArray = [\r\n        '7:10', '8:00', '9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '14:50', '15:40', '16:30',\r\n    ];\r\n    return <>\r\n        <div></div>\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(11, calc(90vw/11))', columnGap: '1px' }}>\r\n            {startOfLessonArray.map(startOfLesson => {\r\n                const hm = startOfLesson.split(':');\r\n                return new Date().setHours(parseInt(hm[0]), parseInt(hm[1]));\r\n            }).map((startOfLesson, idx) => <HeaderSlotComponent lessonIdx={idx} startOfLesson={startOfLesson}/>)}\r\n        </div>\r\n    </>;\r\n};\r\n\r\n\r\nexport default TimetableHeaderComponent;","import { Box, Container, makeStyles } from \"@material-ui/core\";\r\nimport { eachDayOfInterval } from \"date-fns\";\r\nimport { endOfWeek, startOfWeek } from \"date-fns/esm\";\r\nimport React, { FunctionComponent, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, useParams } from \"react-router-dom\";\r\nimport { RootState } from \"typesafe-actions\";\r\nimport { loadClassesAsync } from \"../../store/classes/actions\";\r\nimport { loadClassesEpic } from \"../../store/classes/epics\";\r\nimport { loadScheduleAsync } from \"../../store/schedule/actions\";\r\nimport DayTimetableComponent from \"./dayTimetable/DayTimetableComponent\";\r\nimport TimetableHeaderComponent from \"./timetableHeader/TimetableHeaderComponent\";\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n    schedule: state.schedule.schedule,\r\n});\r\n\r\nconst dispatchProps = {\r\n    loadSchedule: loadScheduleAsync.request,\r\n    loadClasses: loadClassesAsync.request,\r\n}\r\n\r\ntype ScheduleParams = {\r\n    classParam: string,\r\n}\r\n\r\ntype ScheduleProps = ReturnType<typeof mapStateToProps> & typeof dispatchProps;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    timetableWrapper: {\r\n        display: 'grid',\r\n        gridAutoFlow: 'rows',\r\n        gridTemplateColumns: '7vw 90vw',\r\n        gridTemplateRows: '5vh repeat(5, 15vh)',\r\n        rowGap: '1px',\r\n        margin: theme.spacing(2, 1, 2, 1),\r\n    },\r\n}));\r\n\r\nconst TimetableComponent: FunctionComponent<ScheduleProps> = ({ schedule, loadSchedule, loadClasses }) => {\r\n    console.log(\"Am I even here?\");\r\n    const classParam = useParams<ScheduleParams>().classParam;\r\n    console.log(classParam);\r\n    useEffect(() => { loadClasses(); }, [loadClasses]);\r\n    useEffect(() => { loadSchedule(classParam); }, [loadSchedule, classParam]);\r\n    const classes = useStyles();\r\n    const today = new Date();\r\n    const days: Date[] = eachDayOfInterval({\r\n        start: startOfWeek(today, { weekStartsOn: 1 }),\r\n        end: endOfWeek(today, { weekStartsOn: 1 }),\r\n    });\r\n\r\n    return <Box className={classes.timetableWrapper}>\r\n        <TimetableHeaderComponent />\r\n        {Array.from(Array(5).keys()).map(dayIdx => <DayTimetableComponent dayTimetable={schedule[dayIdx]} dayIdx={dayIdx} currentWeekInterval={days} />)}\r\n        {/* Class param: {classParam} */}\r\n        {/* Schedule: */}\r\n        {/* {JSON.stringify(schedule)} */}\r\n    </Box>;\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, dispatchProps)(TimetableComponent);","import { Container } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useRouteMatch,\r\n  useParams,\r\n  HashRouter\r\n} from \"react-router-dom\";\r\nimport PageFooterComponent from \"./components/PageFooterComponent\";\r\nimport PageHeaderComponent from \"./components/PageHeaderComponent\";\r\nimport TimetableComponent from \"./components/timetable/TimetableComponent\";\r\n\r\n\r\n\r\nexport default function App() {\r\n  return (\r\n    <HashRouter basename={\"/\"}>\r\n      {/* <div>\r\n        <ul>\r\n          <li>\r\n          <Link to=\"/\">Home</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/about\">About</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/topics\">Topics</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/schedule\">Schedule</Link>\r\n          </li>\r\n        </ul> */}\r\n\r\n      <Switch>\r\n        <Route path=\"/about\">\r\n          <About />\r\n        </Route>\r\n        <Route path=\"/topics\">\r\n          <Topics />\r\n        </Route>\r\n        <Route path=\"/schedule/:classParam\">\r\n          <div style={{display: 'flex', flexDirection: 'column', height: '100vh'}}>\r\n            <div style={{flex: \"1 0 auto\"}}>\r\n              <PageHeaderComponent />\r\n              <TimetableComponent />\r\n            </div>\r\n            <PageFooterComponent />\r\n          </div>\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <Home />\r\n        </Route>\r\n      </Switch>\r\n      {/* </div> */}\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nfunction Home() {\r\n  return <h2>\r\n    Home basename\r\n    <Link to=\"/schedule/2E\">Schedule</Link>\r\n  </h2>;\r\n}\r\n\r\nconst About = () => {\r\n  return <h2>About</h2>;\r\n}\r\n\r\nfunction Topics() {\r\n  let match = useRouteMatch();\r\n\r\n  return (\r\n    <div>\r\n      <h2>Topics</h2>\r\n\r\n      <ul>\r\n        <li>\r\n          <Link to={`${match.url}/components`}>Components</Link>\r\n        </li>\r\n        <li>\r\n          <Link to={`${match.url}/props-v-state`}>\r\n            Props v. State\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n\r\n      {/* The Topics page has its own <Switch> with more routes\r\n          that build on the /topics URL path. You can think of the\r\n          2nd <Route> here as an \"index\" page for all topics, or\r\n          the page that is shown when no topic is selected */}\r\n      <Switch>\r\n        <Route path={`${match.path}/:topicId`}>\r\n          <Topic />\r\n        </Route>\r\n        <Route path={match.path}>\r\n          <h3>Please select a topic.</h3>\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface TopicParams {\r\n  topicId: string,\r\n};\r\n\r\nfunction Topic() {\r\n  let { topicId } = useParams<TopicParams>();\r\n  return <h3>Requested topic ID: {topicId}</h3>;\r\n}\r\n\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { combineReducers } from 'redux';\r\nimport { ScheduleStatus, WeekSchedule } from \"ApiModel\";\r\nimport { createReducer, RootAction, RootState } from 'typesafe-actions';\r\nimport { loadScheduleAsync } from \"./actions\";\r\n\r\nexport const isLoadingSchedule = createReducer({ loading: true, error: false } as ScheduleStatus)\r\n    .handleAction(loadScheduleAsync.request, () => ({ loading: true, error: false } as ScheduleStatus))\r\n    .handleAction(loadScheduleAsync.failure, () => ({ loading: false, error: true } as ScheduleStatus))\r\n    .handleAction(loadScheduleAsync.success, (state, action) => {\r\n        return {loading: false, error: !action.payload.success} as ScheduleStatus;\r\n    });\r\n\r\nexport const schedule = createReducer([] as WeekSchedule)\r\n    .handleAction(loadScheduleAsync.success, (state, action) => action.payload.resp ? action.payload.resp : []);\r\n\r\nconst scheduleReducer = combineReducers({\r\n    isLoadingSchedule,\r\n    schedule\r\n});\r\n\r\nexport default scheduleReducer;\r\nexport type ScheduleState = ReturnType<typeof scheduleReducer>;","import { loadClassesAsync } from './actions';\r\nimport { combineReducers } from 'redux';\r\nimport { ClassesStatus } from \"ApiModel\";\r\nimport { createReducer } from 'typesafe-actions';\r\n\r\nexport const isLoadingClasses = createReducer({ loading: true, error: false } as ClassesStatus)\r\n    .handleAction(loadClassesAsync.request, () => ({ loading: true, error: false } as ClassesStatus))\r\n    .handleAction(loadClassesAsync.failure, () => ({ loading: false, error: true } as ClassesStatus))\r\n    .handleAction(loadClassesAsync.success, (state, action) => {\r\n        return { loading: false, error: !action.payload.success } as ClassesStatus;\r\n    });\r\n\r\nexport const classes = createReducer([] as string[])\r\n    .handleAction(loadClassesAsync.success, (state, action) => action.payload.resp ? action.payload.resp : []);\r\n\r\nconst classesReducer = combineReducers({\r\n    isLoadingClasses,\r\n    classes,\r\n});\r\n\r\nexport default classesReducer;\r\nexport type ClassesState = ReturnType<typeof classesReducer>;","\r\nimport { combineReducers } from 'redux';\r\nimport scheduleReducer from './schedule/reducer';\r\nimport classesReducer from './classes/reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  schedule: scheduleReducer,\r\n  classes: classesReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { loadScheduleAsync } from './actions';\r\nimport { Epic } from 'redux-observable';\r\nimport { RootAction, RootState, Services, isActionOf } from 'typesafe-actions';\r\nimport { from, of } from 'rxjs';\r\nimport { filter, switchMap, map, catchError } from 'rxjs/operators';\r\n\r\nexport const loadScheduleEpic: Epic<\r\n    RootAction,\r\n    RootAction,\r\n    RootState,\r\n    Services\r\n> = (action$, state$, { api }) => action$.pipe(\r\n    filter(isActionOf(loadScheduleAsync.request)),\r\n    switchMap((action) =>\r\n        from(api.schedule.getSchedule(action.payload)).pipe(\r\n            map(loadScheduleAsync.success),\r\n            catchError((message: string) => of(loadScheduleAsync.failure(message))\r\n            )\r\n        )\r\n    )\r\n);","import { loadClassesAsync } from './actions';\r\nimport { Epic } from \"redux-observable\";\r\nimport { catchError, filter, map, switchMap } from \"rxjs/operators\";\r\nimport { isActionOf, RootAction, RootState, Services } from \"typesafe-actions\";\r\nimport { from, of } from 'rxjs';\r\n\r\nexport const loadClassesEpic: Epic<\r\n    RootAction,\r\n    RootAction,\r\n    RootState,\r\n    Services\r\n> = (action$, state$, { api }) => action$.pipe(\r\n    filter(isActionOf(loadClassesAsync.request)),\r\n    switchMap(() =>\r\n        from(api.schedule.getClasses()).pipe(\r\n            map(loadClassesAsync.success),\r\n            catchError((message: string) => of(loadClassesAsync.failure(message))\r\n            )\r\n        )\r\n    )\r\n);","import { combineEpics } from 'redux-observable';\r\n\r\nimport * as scheduleEpics from './schedule/epics';\r\nimport * as classesEpics from './classes/epics';\r\n\r\nexport default combineEpics(\r\n    ...Object.values(scheduleEpics),\r\n    ...Object.values(classesEpics),\r\n);\r\n","import { GetScheduleResponse, GetClassesResponse } from \"ApiModel\";\r\n\r\n\r\nexport function getSchedule(classParam: string): Promise<GetScheduleResponse> {\r\n    return fetch(`https://sabat.dev/api/tta?c=${classParam}&o=0`)\r\n        .then(response => response.json());\r\n}\r\n\r\nexport function getClasses(): Promise<GetClassesResponse> {\r\n    return fetch(`https://sabat.dev/api/cla`)\r\n        .then(response => response.json());\r\n}","import * as schedule from './schedule-api';\r\n\r\nexport default {\r\n    api: {\r\n        schedule,\r\n    },\r\n};","import { createStore, applyMiddleware } from 'redux';\r\nimport { createEpicMiddleware } from 'redux-observable';\r\nimport { RootAction, RootState, Services } from 'typesafe-actions';\r\n\r\nimport rootReducer from './root-reducer';\r\nimport rootEpic from './root-epic';\r\nimport services from '../services';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nexport const epicMiddleware = createEpicMiddleware<\r\n  RootAction,\r\n  RootAction,\r\n  RootState,\r\n  Services\r\n>({\r\n  dependencies: services,\r\n});\r\n\r\n// configure middlewares\r\nconst middlewares = [epicMiddleware];\r\n// compose enhancers\r\nconst enhancer = composeWithDevTools(applyMiddleware(...middlewares));\r\n\r\n// rehydrate state on app start\r\nconst initialState = {};\r\n\r\n// create store\r\nconst store = createStore(rootReducer, enhancer);\r\nepicMiddleware.run(rootEpic);\r\n\r\n// export store singleton instance\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core';\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiCssBaseline: {\r\n      '@global': {\r\n        body: {\r\n          '-webkit-text-size-adjust': 'none',\r\n          'text-size-adjust': 'none',\r\n          '-moz-text-size-adjust': 'none',\r\n          '-ms-text-size-adjuist': 'none',\r\n        },\r\n        '*': {\r\n          '--scrollbarBG': '#CFD8DC',\r\n          '--thumbBG': '#90A4AE',\r\n          scrollbarWidth: 'thin',\r\n          scrollbarColor: 'var(--thumbBG) var(--scrollbarBG)',\r\n        },\r\n        '*::-webkit-scrollbar': {\r\n          width: '11px',\r\n        },\r\n        '*::-webkit-scrollbar-track': {\r\n          background: 'var(--scrollbarBG)',\r\n        },\r\n        '*::-webkit-scrollbar-thumb': {\r\n          backgroundColor: 'var(--thumbBG)',\r\n          bordeRadius: '6px',\r\n          border: '3px solid var(--scrollbarBG)',\r\n        }\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <ThemeProvider theme={theme}>\r\n        <App />\r\n      </ThemeProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}
